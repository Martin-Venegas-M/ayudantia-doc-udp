---
title: "R B√°sico: comenzando un viaje"
date: "Abril, 2025"
author: "" 
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      ratio: '16:9'
      countIncrementalSlides: false
      beforeInit: "https://jciturras.github.io/ayudantia-sol3051/slides/00-intro-r/macros.js"
      slideNumberFormat: |
        <div class="progress-bar-container">
          <div class="progress-bar" style="width: calc(%current% / %total% * 100%);">
          </div>
        </div>
    css: ["https://jciturras.github.io/ayudantia-sol3051/slides/00-intro-r/xaringan-coes.css","https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css"]
    seal: false # esto omite title slide autom√°tica  
---
layout: true
class: animated, fadeIn

---
class: inverse, left, middle

# _R B√°sico: comenzando un viaje üöÄ_


Mart√≠n Venegas M√°rquez


***
[Doctorado en Psicolog√≠a UDP - Seminario Metodol√≥gico Disciplinario: Metodolog√≠as Cuantitativas - Oto√±o 2025]()

<br>

#### Abril, 2025

---
class: inverse, left, middle

# Contenidos de la sesi√≥n

--

**1. ¬øPor qu√© utilizar R?**

--

**2. ¬øQu√© es R? ¬øQu√© es RStudio?**

--

**3. Fundamentales de R**

---
class: middle, center, inverse

# _1. ¬øPor qu√© utilizar R?_

---

# üéØRaz√≥n estrategica: demanda profesional y acad√©mica 

- Muchas organizaciones, universidades, ONGs, consultoras e institutos p√∫blicos **buscan investigadores que manejen R**.

- Tener dominio de R:

  * **Abre puertas** en investigaci√≥n, an√°lisis de datos, pol√≠ticas p√∫blicas, consultor√≠a, psicometr√≠a, etc.

  * Mejora la empleabilidad, ya que el **an√°lisis de datos es una habilidad transversal** a muchos campos y disciplinas.

- Adem√°s, **R es gratuito** y no depende de licencias caras, lo que facilita su uso profesional sin costo extra.

---
# üéØRaz√≥n estrategica: demanda profesional y acad√©mica 

- Cada vez m√°s art√≠culos cient√≠ficos, especialmente en ciencias sociales, psicolog√≠a, salud y econom√≠a, publican sus an√°lisis hechos en R.

- **Revistas de alto impacto exigen c√≥digos reproducibles para aceptar publicaciones**.

  * ü§ì**Ejemplo:** desde 2021 _[Nature](https://www.nature.com/nature-portfolio/editorial-policies/reporting-standards)_ exige que los autores proporcionen datos y c√≥digo para la revisi√≥n de los pares y la publicaci√≥n, siempre que sea posible.

- Aprender R permite estar alineado con las mejores pr√°cticas de la ciencia actual.

---

# üîß Raz√≥n t√©cnica: potencia y flexibilidad

- R es una herramienta poderosa y flexible que permite manejar datos complejos, crear gr√°ficos personalizados y automatizar an√°lisis.

- Entre otras cosas, podemos:

  ‚úÖEmplear m√∫ltiples t√©cnicas estad√≠sticas de manera relativamente sencilla

  ‚úÖ Crear nuestras propias funciones.

  ‚úÖ Automatizar reportes.

  ‚úÖ Dise√±ar gr√°ficos personalizados.

- No est√° limitado a las **opciones de un men√∫**.

---
# R v/s Stata, SPSS, etc...

.left-column[

.center[![:scale 30%](input/images/r-logo.svg)]

üî¢**R es un lenguaje de programaci√≥n:**

Escribes c√≥digo para decirle al  
computador qu√© hacer.

]
.right-column[

.center[![:scale 10%](input/images/stata-logo.png)] .center[![:scale 10%](input/images/spss-logo.svg)]

**üëâ SPSS y Stata son principalmente programas de men√∫:**

Haces clics en botones o men√∫s para ejecutar comandos (aunque Stata tambi√©n permite escribir algo de c√≥digo, pero m√°s restringido).


]

---

 _**Veamos...**_ ü§ìüîé

| Aspecto                       | R                                                              | SPSS / Stata                                                   |
|--------------------------------|----------------------------------------------------------------|----------------------------------------------------------------|
| **Forma principal de trabajar**üíª   | Escribes c√≥digo                                                | Usas men√∫s y formularios                                       |
| **Flexibilidad**üß∂                  | Muy alta: puedes crear funciones, automatizar procesos, personalizar todo | Limitada a las opciones que ofrece el programa                 |
| **Reproducibilidad** üé¨             | Muy alta: guardas todo el c√≥digo, puedes replicarlo exactamente | Baja si solo usas men√∫s (a menos que guardes sintaxis aparte)   |
| **Costo**üí≤                         | Gratis y de c√≥digo abierto                                     | Licencias pagadas (caras en general)                           |
| **Extensi√≥n**üìè                     | Miles de paquetes creados por la comunidad                     | Limitado a lo que la empresa desarrolla                        |
| **Curva de aprendizaje** üìà         | M√°s empinada al principio (hay que aprender a codificar)       | M√°s f√°cil al principio (solo haces clics)                      |

---

# üëå Raz√≥n √©tica: reproducibilidad en la ciencia

- La crisis de reproducibilidad mostr√≥ que muchos resultados cient√≠ficos no se pueden replicar porque:

  * No se documentaron bien los an√°lisis.

  * Se hicieron manualmente y no quedaron registros exactos.

- En R, todo lo que haces queda escrito en c√≥digo: cada paso, cada decisi√≥n, cada transformaci√≥n de datos. **Tenemos la _receta_ de c√≥mo llegar al resultado** üìù‚û°üç≤

---

# üëå Raz√≥n √©tica: reproducibilidad en la ciencia

- Eso permite:

  ‚úÖ Auditar los an√°lisis (ver c√≥mo se lleg√≥ a un resultado).

  ‚úÖ Replicar los an√°lisis con nuevos datos.

  ‚úÖ Corregir errores de manera transparente.
  
---
class: middle, center, inverse

# _1. ¬øQu√© es R? ¬øQu√© es RStudio?_

---
# ¬øQu√© es R?

Seg√∫n [r-project.org](https://www.r-project.org/about.html): 

--

> R is a **language** and **environment** for statistical computing and graphics (...) ü§ì

--

> R provides a wide **variety of statistical** (linear and nonlinear modelling, classical statistical tests, time-series analysis, classification, clustering, ‚Ä¶) and **graphical techniques**, and is highly **extensible** (...) üíªüìä

--

> The term ‚Äúenvironment‚Äù is intended to characterize it as a **fully planned and coherent system**, rather than an incremental accretion of very specific and inflexible tools, as is frequently the case with other data analysis software (...) üßê

--

> Many users think of R as a statistics system. **We prefer to think of it as an environment within which statistical techniques are implemented**. R can be extended (easily) via packages (...) üí°

---
class: middle, center, inverse

# Entonces... ¬øqu√© es R?

.large[üí°[**Un lenguaje y un ambiente (sistema planificado y coherente) de programaci√≥n por el cu√°l se pueden implementar herramientas gr√°ficas y estad√≠sticas.**]()]

---
# üìå Principales caracter√≠sticas de R

**1. Lenguaje especializado en an√°lisis de datos y estad√≠stica** üìä

- R fue creado espec√≠ficamente para an√°lisis estad√≠stico, modelamiento y visualizaci√≥n de datos.

- Tiene muchas funciones estad√≠sticas de base (regresi√≥n, pruebas de hip√≥tesis, an√°lisis multivariado, etc.).

| Regresi√≥n lineal en ecuaci√≥n                         | Regresi√≥n lineal en R                                 |
|------------------------------------------|--------------------------------------------------------|
| $\hat{Y} = \beta_0 + \beta_1 X$          | `lm(vary ~ varx, data = df)`               |

üìù**Nota:** `varx` y `vary` corresponden a columnas del set de datos `df`
---
# üìå Principales caracter√≠sticas de R

**2. Orientado a objetos** üìç

- En R, todo es un objeto (vectores, tablas, modelos, gr√°ficos, etc.).

- Se trabaja construyendo, modificando y combinando objetos.

- Esto da mayor flexibilidad al trabajo, permitiendo la implementaci√≥n de soluciones creativas y buenas pr√°cticas.

--

> ü§ì **Nota t√©cnica:** R es un lenguaje orientado a objetos (OOP, _Object-Oriented Programming_). Esto significa que los datos y funciones pueden agruparse en objetos, y estos pueden tener clases, atributos y m√©todos espec√≠ficos que definen c√≥mo deben comportarse. Los tres tipos m√°s comunes son: S3, S4 y R6 (ver m√°s [aqu√≠](https://adv-r.hadley.nz/oo.html)).

---
# üìå Principales caracter√≠sticas de R

**3. Lenguaje interpretado**üî¢

- A diferencia de otros lenguajes, no es necesario "compilar" el c√≥digo. **R ejecuta directamente las instrucciones dadas, l√≠nea por l√≠nea.**

- Esto facilita el trabajo exploratorio y el an√°lisis interactivo.

---
# üìå Principales caracter√≠sticas de R

**4. Extensibilidad mediante paquetes**üì¶

- Existen m√°s de 20.000 paquetes en [CRAN](https://cran.r-project.org/) (y muchos m√°s en [GitHub](https://github.com/)) que ampl√≠an las capacidades de R: desde modelos avanzados hasta visualizaciones interactivas, _Machine Learning_, _web scraping_, etc.

- Es posible crear paquetes propios.

- Ejemplo de paquetes creados en Chile y archivados en CRAN: 

‚úÖ [_calidad_](https://cran.r-project.org/web/packages/calidad/index.html): evaluar la calidad de estimaciones en base a metodolog√≠a del INE  
‚úÖ[ _chilemapas_](https://cran.r-project.org/web/packages/chilemapas/index.html): mapas terrestres con tipolog√≠as simplificadas  
‚úÖ [_guaguas_:](https://cran.r-project.org/web/packages/guaguas/index.html) datos de nombres inscritos en Chile entre 1920 y 2021

---

.center[![:scale 90%](input/images/tidyverse.png)]

---
# üìå Principales caracter√≠sticas de R

**5. Gr√°ficos y visualizaciones de alta calidad**üìä

- R tiene sistemas de visualizaci√≥n muy potentes, como:

‚úÖ Base R graphics

‚úÖ ggplot2 (del ecosistema tidyverse)

‚úÖ librer√≠as para gr√°ficos interactivos como plotly, highcharter, leaflet, etc.

- Adem√°s, tiene recursos que facilitan su aprendizaje (ej. [R Graph Gallery](https://r-graph-gallery.com/#))

--

> ü§ì **Nota:** Algunos recursos que ser√°n de utilidad m√°s adelante: [tutorial de ggplot2](https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/) y [Data Visualization: A practical introduction](https://socviz.co/)
---

## Base R graphics

.pull-left[
```{r eval=FALSE}
# Gr√°fico de dispersi√≥n en R base
plot(mtcars$wt, mtcars$mpg,
     main = "Consumo vs Peso (R base)",
     xlab = "Peso del auto (wt)",
     ylab = "Millas por gal√≥n (mpg)",
     pch = 19,         # tipo de punto
     col = "blue")     # color

```
]

.pull-right[
```{r echo=FALSE}
# Gr√°fico de dispersi√≥n en R base
plot(mtcars$wt, mtcars$mpg,
     main = "Consumo vs Peso (R base)",
     xlab = "Peso del auto (wt)",
     ylab = "Millas por gal√≥n (mpg)",
     pch = 19,         # tipo de punto
     col = "blue")     # color

```
]


---

## Ggplot2

.pull-left[
```{r eval=FALSE}
# Primero cargar el paquete
library(ggplot2)

# Gr√°fico de dispersi√≥n con ggplot2
ggplot(mtcars, aes(x = wt, y = mpg)) +
  geom_point(color = "darkred", size = 3) +
  labs(title = "Consumo vs Peso (ggplot2)",
       x = "Peso del auto (wt)",
       y = "Millas por gal√≥n (mpg)") +
  theme_minimal()
```
]

.pull-right[
```{r echo=FALSE}
# Primero cargar el paquete
library(ggplot2)

# Gr√°fico de dispersi√≥n con ggplot2
ggplot(mtcars, aes(x = wt, y = mpg)) +
  geom_point(color = "darkred", size = 3) +
  labs(title = "Consumo vs Peso (ggplot2)",
       x = "Peso del auto (wt)",
       y = "Millas por gal√≥n (mpg)") +
  theme_minimal()
```
]

---

## Plotly

.pull-left[
```{r echo=FALSE, message=FALSE, warning=FALSE}
# Cargar plotly
library(plotly)

# Crear gr√°fico interactivo
plot_ly(data = mtcars, x = ~wt, y = ~mpg, type = 'scatter', mode = 'markers',
        marker = list(color = 'forestgreen', size = 10)) %>%
  layout(title = "Consumo vs Peso (plotly)",
         xaxis = list(title = "Peso del auto (wt)"),
         yaxis = list(title = "Millas por gal√≥n (mpg)"))
```
]

.pull-right[
```{r eval = FALSE}
# Cargar plotly
library(plotly)

# Crear gr√°fico interactivo
plot_ly(data = mtcars, x = ~wt, y = ~mpg, type = 'scatter', mode = 'markers',
        marker = list(color = 'forestgreen', size = 10)) %>%
  layout(title = "Consumo vs Peso (plotly)",
         xaxis = list(title = "Peso del auto (wt)"),
         yaxis = list(title = "Millas por gal√≥n (mpg)"))
```
]


---
# üìå Principales caracter√≠sticas de R

**6. C√≥digo abierto y gratuito**üë©‚Äçüíª

- R es software libre bajo licencia GNU.

- No es necesario pagar licencias ni estar atado a ninguna empresa.

- Esto permite revisar, modificar y compartir el c√≥digo fuente si asi se desea.

---
# üìå Principales caracter√≠sticas de R

**7. Fuerte comunidad de usuarios**üë•üë•üë§

- Hay una **comunidad activa de usuarios** que crean paquetes, tutoriales, libros, cursos gratuitos y responden dudas en foros.

- Esto **facilita el aprendizaje** y la resoluci√≥n de problemas.

- Los principales recursos de consulta son:

1. **[Stackoverflow](https://stackoverflow.com/questions):** foro sobre c√≥digo en general
2. **[Posit Community](https://forum.posit.co/):** dudas m√°s especificas de R
3. **[CRAN](https://cran.r-project.org/):** archivo de R, consulta sobre paquetes y documentaci√≥n


.pull-left[![:scale 50%](input/images/stackoverflow-logo.svg)]
.pull-right[![:scale 50%](input/images/posit-community-logo.png)]

---
# üìå Principales caracter√≠sticas de R

**8. Ideal para ciencia reproducible**üîÑ

- Como todo se hace escribiendo c√≥digo, es posible guardar exactamente todos los pasos de nuestro an√°lisis.

- Facilita pr√°cticas de transparencia, replicaci√≥n y publicaci√≥n reproducible.

---
# RStudio

---

class: middle, center, inverse

# _3. Fundamentales de R_

---
# RScript

- Archivo tipo `.R` que alberga el c√≥digo necesario para la realizaci√≥n de una tarea o una serie de tareas (ej. procesamiento, an√°lisis o visualizaci√≥n de datos, entre otros)

- Permiten guardar y compartir nuestro trabajo üíæ

- Ser√°n nuestra principal herramienta de trabajo üßê

### ‚ú®**Siempre escribir nuestro c√≥digo en el script, nunca en la terminal/consola**‚ú®

---
# RScript
## Los Scripts como recetas de cocina üë®‚Äçüç≥

- Son un **registro** de pasos necesarios para llegar a un plato especifico

- Los pasos deben ser realizados en **orden**: _no podemos cocer verduras si no hemos hervido el agua_

- Plantean el uso de **herramientas** para lograr un plato: _para hervir agua necesitamos una olla o un hervidor_

- Las herramientas tienen **funciones definidas**: _no podemos hervir agua con un tenedor o un microondas (o no ser√≠a lo m√°s eficiente)_

---
# RScript
## Mayor reproducibilidad y transparencia üîÑ

- As√≠ como nosotros usamos nuestra receta de cocina para llegar al plato final, **otros pueden hacer lo mismo**. De la misma manera, nosotros podemos usar otras recetas para hacer otros platos (u otra versi√≥n del de nosotros) üìùüë©‚Äçüç≥

- Y m√°s importante aun, nuestro trabajo est√° a disposici√≥n del ojo cr√≠tico de los dem√°s (y viceversa)... **¬°dos (o muchas) cabezas piensan mejor que una!**üë•

---
# Working Directory üìÅüî®

- La primera vez que abrimos R, este se "posiciona" en una carpeta del computador. Esta ser√° nuestra carpeta de trabajo o... **_Working Directory_**

- El _Working Directory_ se puede revisar con el comando `getwd()`

- As√≠ tambi√©n, se puede cambiar con `setwd("ruta-a-carpeta-de-trabajo")`

- La carpeta de trabajo debe ser fijada al principio del script

- La idea es que el _Working Dirctory_ incluya todos los insumos necesarios para la realizaci√≥n de la tarea o las tareas que se realizar√°n en el script (ej. set de datos)

---
# Rproject
.left-column[
![:scale 50%](input/images/rproj.png)
]

- Es una forma que tiene R para **organizar** la carpeta de trabajo

- Funciona a trav√©s de un archivo `.Rproj`, el cual define la **carpeta ra√≠z** üå±

- La carpeta ra√≠z se entiende como la carpeta general que **alberga el proyecto** (y todos sus insumos y resultados). 

- **Facilita la reproducibilidad**. Podemos compartir nuestro trabajo sin necesidad de modificar el c√≥digo (cambiar  el directorio de trabajo `setwd()`)

üëâ**En t√©rminos concretos, la carpeta en d√≥nde est√© el `.Rproj` ser√° autom√°ticamente el _Working Directory_**

---
# Rproject
## Uso de rutas relativas

- Al explicitar una carpeta ra√≠z, no es necesario especificar la ruta completa al archivo. 

- Por ejemplo, si queremos cargar un set de datos `datos.rds` que est√° en la misma carpeta que el `.Rproj` podemos:

```r
readRDS("datos.rds")
```

En vez de...

```r
readRDS("C:/Users/mvenegasm/Desktop/ayudantia/datos.rds")
```

üìù**Nota:** En este ejemplo, la carpeta `ayudantia` ser√≠a: (1) donde se encuentra el `.Rproj` (2) la carpeta ra√≠z y (3) el _Working Directory_.

---
# Paquetes (_packages_) üì¶

- **Conjunto de funciones** para un tipo de tarea üßê

- Una de las principales potencialidades de R es su capacidad de **extensibilidad**

- La extensibilidad implica que se pueden ampliar las funciones propias de R en base a las necesidades espec√≠ficas de los usuarios

- Los usuarios pueden crear sus propios paquetes en la medida que lo consideren necesario.

- Existen una serie de paquetes que presentan **alternativas m√°s id√≥neas** para tareas cotidianas, en comparaci√≥n a las funcionalidades de R base.

- Los paquetes suelen tener una comunidad detr√°s que est√° preocupada de darles soporte, resolver _bugs_ y responder dudas

---

# Paquetes (_packages_) üì¶

## Los paquetes como utensilios de cocina üî™

- Los paquetes se pueden pensar como los utensilios que se utilizan para ejecutar las recetas

- Los utensilios deben ser acordes a lo que solicita la receta

---
# Paquetes (_packages_) üì¶

## Instalaci√≥n de paquetes üì¶üî®

- La instalaci√≥n de paquetes se debe hacer solamente una vez

- Una vez instalado el paquete, este estar√° albergado en nuestro computador

- Es necesario actualizar los paquetes de R cada cierto tiempo. Si se actualiza la versi√≥n de R, se deben volver a instalar los paquetes.

- La instalaci√≥n se hace con...

```r
install.packages("nombre-paquete")
```
---
# Paquetes (_packages_) üì¶

## Carga de paquetes üì¶‚¨Ü

- Instalar un paquete no significa que est√© listo para ser usado, para ello se deben "cargar"

- Siguiendo la analog√≠a de la cocina, ser√≠a como sacar los utensilios de la alacena para dejarlos en la mesa de cocina üëâüî™üë®‚Äçüç≥

- Los paquetes se cargan con...

```r
library(nombre-paquete)
```

---
# Paquetes (_packages_) üì¶
## `pacman` (_package manager_)

- Un paquete para manejar paquetes

- Una recomendaci√≥n para hacer el c√≥digo m√°s eficiente

- `p_load()` instala y carga los paquetes seg√∫n sea necesario
---
# Paquetes (_packages_) üì¶
## `pacman` (_package manager_)

En vez de...

```r
install.packages("dplyr")
install.packages("ggplot2")
install.packages("haven")
library("dplyr")
library("ggplot2")
library("haven")
```

Usar...

```r
install.packages("pacman")
pacman::p_load(dplyr, ggplot2, haven)
```

---
# Carga de datos

- Leer archivos externos (CSV, Excel, etc.).

```r
# Base R:
datos <- read.csv("datos/encuesta.csv")

# tidyverse:
datos <- readr::read_csv("datos/encuesta.csv")
```

- Tambi√©n puedes leer SPSS, Stata, Excel, etc. con `haven` o `readxl`.

---
# Tipos de datos

| Tipo     | Ejemplo                | Descripci√≥n |
|----------|------------------------|-------------|
| num√©rico | `2`, `3.14`            | N√∫meros reales, con decimales |
| entero   | `4L`                   | N√∫meros enteros (terminan en `L`) |
| l√≥gico   | `TRUE`, `FALSE`        | Valores booleanos (s√≠ o no) |
| texto    | `"hola"`              | Cadenas de caracteres |
| factor   | `factor(c("H", "M"))` | Variables categ√≥ricas, usadas com√∫nmente para factores o niveles |

```r
typeof("hola")  # character
is.numeric(3.14)  # TRUE
```

---
# Estructuras de datos

| Estructura | Descripci√≥n |
|------------|-------------|
| vector     | Secuencia lineal de elementos del mismo tipo (num√©rico, l√≥gico, texto, etc.) |
| lista      | Colecci√≥n de objetos heterog√©neos; cada elemento puede ser de un tipo distinto |
| data.frame | Tabla bidimensional; cada columna puede tener un tipo distinto |
| matriz     | Arreglo bidimensional con elementos del mismo tipo |
| tibble     | Versi√≥n moderna de `data.frame`, con mejor impresi√≥n y comportamiento |

```r
# Ejemplo de vector
temp <- c(22.5, 23.0, 21.8)

# Ejemplo de lista
persona <- list(nombre = "Ana", edad = 30, trabaja = TRUE)

# Ejemplo de data.frame
df <- data.frame(nombre = c("Ana", "Luis"), edad = c(25, 30))
```
---
# Estructuras de datos
![](https://i0.wp.com/balachandark.com/wp-content/uploads/2022/08/dataStructuresNew.png)

---
# Operadores

## Aritm√©ticos
Realizan operaciones matem√°ticas b√°sicas:

```r
3 + 2   # Suma
3 - 2   # Resta
3 * 2   # Multiplicaci√≥n
3 / 2   # Divisi√≥n
3 ^ 2   # Potencia
```
---
# Operadores

## Relacionales
Comparan valores y devuelven `TRUE` o `FALSE`:

```r
3 == 3   # Igualdad (TRUE)
3 != 2   # Diferente (TRUE)
3 > 2    # Mayor que (TRUE)
3 <= 2   # Menor o igual (FALSE)
```
---
# Operadores

## L√≥gicos
Usan operadores booleanos:

```r
TRUE & FALSE   # Y l√≥gico (FALSE)
TRUE | FALSE   # O l√≥gico (TRUE)
!TRUE          # Negaci√≥n (FALSE)
```
---
# Operadores

## Asignaci√≥n
Asignan valores a objetos:

```r
x <- 5
x = 5
```
---
# Operadores

## Pertenencia
Verifican si un elemento pertenece a un conjunto:

```r
2 %in% c(1, 2, 3)  # TRUE
```
