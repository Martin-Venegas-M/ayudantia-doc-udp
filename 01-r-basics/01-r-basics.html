<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R BÃ¡sico: comenzando un viaje</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <script src="libs/header-attrs-2.26/header-attrs.js"></script>
    <link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.10.4/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <script src="libs/jquery-3.5.1/jquery.min.js"></script>
    <link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="https://jciturras.github.io/ayudantia-sol3051/slides/00-intro-r/xaringan-coes.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

layout: true
class: animated, fadeIn

---
class: inverse, left, middle

# _R BÃ¡sico: comenzando un viaje ğŸš€_


MartÃ­n Venegas MÃ¡rquez


***
[Doctorado en PsicologÃ­a UDP - Seminario MetodolÃ³gico Disciplinario: MetodologÃ­as Cuantitativas - OtoÃ±o 2025]()

&lt;br&gt;

#### Mayo, 2025

---
![](input/images/Diapositiva1.png)
---
class: inverse, left, middle

# Contenidos de la sesiÃ³n

--

**1. Â¿Por quÃ© utilizar R?**

--

**2. Â¿QuÃ© es R? Â¿QuÃ© es RStudio?**

--

**3. Fundamentales de R**

---
class: middle, center, inverse

# _1. Â¿Por quÃ© utilizar R?_

---

# ğŸ¯RazÃ³n estrategica: demanda profesional y acadÃ©mica 

--

- Muchas organizaciones, universidades, ONGs, consultoras e institutos pÃºblicos **buscan investigadores que manejen R**.

--

- Tener dominio de R:

  * **Abre puertas** en investigaciÃ³n, anÃ¡lisis de datos, polÃ­ticas pÃºblicas, consultorÃ­a, etc.

  * Mejora la empleabilidad, ya que el **anÃ¡lisis de datos es una habilidad transversal** a muchos campos y disciplinas.

--

- AdemÃ¡s, **R es gratuito** y no depende de licencias caras, lo que facilita su uso profesional sin costo extra.

---
# ğŸ¯RazÃ³n estrategica: demanda profesional y acadÃ©mica 

--

- Cada vez mÃ¡s artÃ­culos cientÃ­ficos, especialmente en ciencias sociales, publican sus anÃ¡lisis hechos en R.

--

- **Revistas de alto impacto exigen cÃ³digos reproducibles para aceptar publicaciones**.

  * ğŸ¤“Por ejemplo, desde 2021 _[Nature](https://www.nature.com/nature-portfolio/editorial-policies/reporting-standards)_ exige que los autores proporcionen datos y cÃ³digo para la revisiÃ³n de los pares y la publicaciÃ³n, siempre que sea posible.

--

- Aprender R permite estar alineado con las mejores prÃ¡cticas de la ciencia actual.

---

# ğŸ”§ RazÃ³n tÃ©cnica: potencia y flexibilidad

--

- R es una herramienta poderosa y flexible que permite manejar datos complejos, crear grÃ¡ficos personalizados y automatizar anÃ¡lisis.

--

- Entre otras cosas, podemos:

  âœ…Emplear mÃºltiples tÃ©cnicas estadÃ­sticas de manera relativamente sencilla

  âœ… Crear nuestras propias funciones.

  âœ… Automatizar reportes.

  âœ… DiseÃ±ar grÃ¡ficos personalizados.

--

- No estÃ¡ limitado a las **opciones de un menÃº**.

---
# R v/s Stata, SPSS, etc...

.left-column[

.center[![:scale 30%](input/images/r-logo.svg)]

ğŸ”¢**R es un lenguaje de programaciÃ³n:**

Escribes cÃ³digo para decirle al  
computador quÃ© hacer.

]
.right-column[

.center[![:scale 10%](input/images/stata-logo.png)] .center[![:scale 10%](input/images/spss-logo.svg)]

**ğŸ‘‰ SPSS y Stata son principalmente programas de menÃº:**

Haces clics en botones o menÃºs para ejecutar comandos (aunque Stata tambiÃ©n permite escribir algo de cÃ³digo, pero mÃ¡s restringido).


]

---

 _**Veamos...**_ ğŸ¤“ğŸ”

| Aspecto                       | R                                                              | SPSS / Stata                                                   |
|--------------------------------|----------------------------------------------------------------|----------------------------------------------------------------|
| **Forma principal de trabajar**ğŸ’»   | Escribes cÃ³digo                                                | Usas menÃºs y formularios                                       |
| **Flexibilidad**ğŸ§¶                  | Muy alta: puedes crear funciones, automatizar procesos, personalizar todo | Limitada a las opciones que ofrece el programa                 |
| **Reproducibilidad** ğŸ¬             | Muy alta: guardas todo el cÃ³digo, puedes replicarlo exactamente | Baja si solo usas menÃºs (a menos que guardes sintaxis aparte)   |
| **Costo**ğŸ’²                         | Gratis y de cÃ³digo abierto                                     | Licencias pagadas (caras en general)                           |
| **ExtensiÃ³n**ğŸ“                     | Miles de paquetes creados por la comunidad                     | Limitado a lo que la empresa desarrolla                        |
| **Curva de aprendizaje** ğŸ“ˆ         | MÃ¡s empinada al principio (hay que aprender a codificar)       | MÃ¡s fÃ¡cil al principio (solo haces clics)                      |

---

# ğŸ‘Œ RazÃ³n Ã©tica: reproducibilidad en la ciencia

--

- La crisis de reproducibilidad mostrÃ³ que muchos resultados cientÃ­ficos no se pueden replicar porque:

  * No se documentaron bien los anÃ¡lisis.

  * Se hicieron manualmente y no quedaron registros exactos.

--

- En R, todo lo que haces queda escrito en cÃ³digo: cada paso, cada decisiÃ³n, cada transformaciÃ³n de datos. **Tenemos la _receta_ de cÃ³mo llegar al resultado** ğŸ“â¡ğŸ²

---

# ğŸ‘Œ RazÃ³n Ã©tica: reproducibilidad en la ciencia

--

- Eso permite:

  âœ… Auditar los anÃ¡lisis (ver cÃ³mo se llegÃ³ a un resultado).

  âœ… Replicar los anÃ¡lisis con nuevos datos.

  âœ… Corregir errores de manera transparente.

--

ğŸ¤“**Nota:** existe un movimiento de ciencia abierta que fomenta el uso de herramientas como R para avanzar hacia una ciencia mÃ¡s reproducible, transparente y replicable. Ver recursos como el [Center for Open Science](https://www.cos.io/) o en Chile el [Laboratorio de InvestigaciÃ³n Social Abierta (LISA)](https://lisa-coes.netlify.app/)
---
class: middle, center, inverse

# _1. Â¿QuÃ© es R? Â¿QuÃ© es RStudio?_

---
# Â¿QuÃ© es R?

SegÃºn [r-project.org](https://www.r-project.org/about.html): 

--

&gt; R is a **language** and **environment** for statistical computing and graphics (...) ğŸ¤“

--

&gt; R provides a wide **variety of statistical** (linear and nonlinear modelling, classical statistical tests, time-series analysis, classification, clustering, â€¦) and **graphical techniques**, and is highly **extensible** (...) ğŸ’»ğŸ“Š

--

&gt; The term â€œenvironmentâ€ is intended to characterize it as a **fully planned and coherent system**, rather than an incremental accretion of very specific and inflexible tools, as is frequently the case with other data analysis software (...) ğŸ§

--

&gt; Many users think of R as a statistics system. **We prefer to think of it as an environment within which statistical techniques are implemented**. R can be extended (easily) via packages (...) ğŸ’¡

---
class: middle, center, inverse

# Entonces... Â¿quÃ© es R?

.large[ğŸ’¡[**Un lenguaje y un ambiente (sistema planificado y coherente) de programaciÃ³n por el cuÃ¡l se pueden implementar herramientas grÃ¡ficas y estadÃ­sticas.**]()]

---
# ğŸ“Œ Principales caracterÃ­sticas de R

**1. Lenguaje especializado en anÃ¡lisis de datos y estadÃ­stica** ğŸ“Š

--

- R fue creado especÃ­ficamente para anÃ¡lisis estadÃ­stico, modelamiento y visualizaciÃ³n de datos.

--

- Tiene muchas funciones estadÃ­sticas de base (regresiÃ³n, pruebas de hipÃ³tesis, anÃ¡lisis multivariado, etc.).

--

| RegresiÃ³n lineal en ecuaciÃ³n                         | RegresiÃ³n lineal en R                                 |
|------------------------------------------|--------------------------------------------------------|
| `\(\hat{Y} = \beta_0 + \beta_1 X\)`          | `lm(vary ~ varx, data = df)`               |

ğŸ“**Nota:** `varx` y `vary` corresponden a columnas del set de datos `df`

---
# ğŸ“Œ Principales caracterÃ­sticas de R

**2. Orientado a objetos** ğŸ“

--

- En R, todo es un objeto (vectores, tablas, modelos, grÃ¡ficos, etc.).

--

- Se trabaja construyendo, modificando y combinando objetos.

--

- Esto da mayor flexibilidad al trabajo, permitiendo la implementaciÃ³n de soluciones creativas y buenas prÃ¡cticas.

--

&gt; ğŸ¤“ **Nota tÃ©cnica:** R es un lenguaje orientado a objetos (OOP, _Object-Oriented Programming_). Esto significa que los datos y funciones pueden agruparse en objetos, y estos pueden tener clases, atributos y mÃ©todos especÃ­ficos que definen cÃ³mo deben comportarse. Los tres tipos mÃ¡s comunes son: S3, S4 y R6 (ver mÃ¡s [aquÃ­](https://adv-r.hadley.nz/oo.html)).

---
# ğŸ“Œ Principales caracterÃ­sticas de R

**3. Lenguaje interpretado**ğŸ”¢

--

- A diferencia de otros lenguajes, no es necesario "compilar" el cÃ³digo. **R ejecuta directamente las instrucciones dadas, lÃ­nea por lÃ­nea.**

--

- Esto facilita el trabajo exploratorio y el anÃ¡lisis interactivo.

---
# ğŸ“Œ Principales caracterÃ­sticas de R

**4. Extensibilidad mediante paquetes**ğŸ“¦

--

- Existen mÃ¡s de 20.000 paquetes en [CRAN](https://cran.r-project.org/) (y muchos mÃ¡s en [GitHub](https://github.com/)) que amplÃ­an las capacidades de R: desde modelos avanzados hasta visualizaciones interactivas, _Machine Learning_, _web scraping_, etc.

--

- Es posible crear paquetes propios.

--

- Ejemplo de paquetes creados en Chile y archivados en CRAN: 

âœ… [_calidad_](https://cran.r-project.org/web/packages/calidad/index.html): evaluar la calidad de estimaciones en base a metodologÃ­a del INE  
âœ…[ _chilemapas_](https://cran.r-project.org/web/packages/chilemapas/index.html): mapas terrestres con tipologÃ­as simplificadas  
âœ… [_guaguas_:](https://cran.r-project.org/web/packages/guaguas/index.html) datos de nombres inscritos en Chile entre 1920 y 2021

---

.center[![:scale 90%](input/images/tidyverse.png)]

---
# ğŸ“Œ Principales caracterÃ­sticas de R

**5. GrÃ¡ficos y visualizaciones de alta calidad**ğŸ“Š

--

- R tiene sistemas de visualizaciÃ³n muy potentes, como:

âœ… Base R graphics

âœ… ggplot2 (del ecosistema tidyverse)

âœ… librerÃ­as para grÃ¡ficos interactivos como plotly, highcharter, leaflet, etc.

--

- AdemÃ¡s, tiene recursos que facilitan su aprendizaje (ej. [R Graph Gallery](https://r-graph-gallery.com/#))

--

&gt; ğŸ¤“ **Nota:** Algunos recursos que serÃ¡n de utilidad mÃ¡s adelante: [tutorial de ggplot2](https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/) y [Data Visualization: A practical introduction](https://socviz.co/)
---

## Base R graphics

.pull-left[

```r
# GrÃ¡fico de dispersiÃ³n en R base
plot(mtcars$wt, mtcars$mpg,
     main = "Consumo vs Peso (R base)",
     xlab = "Peso del auto (wt)",
     ylab = "Millas por galÃ³n (mpg)",
     pch = 19,         # tipo de punto
     col = "blue")     # color
```
]

.pull-right[
![](01-r-basics_files/figure-html/unnamed-chunk-2-1.png)&lt;!-- --&gt;
]


---

## Ggplot2

.pull-left[

```r
# Primero cargar el paquete
library(ggplot2)

# GrÃ¡fico de dispersiÃ³n con ggplot2
ggplot(mtcars, aes(x = wt, y = mpg)) +
  geom_point(color = "darkred", size = 3) +
  labs(title = "Consumo vs Peso (ggplot2)",
       x = "Peso del auto (wt)",
       y = "Millas por galÃ³n (mpg)") +
  theme_minimal()
```
]

.pull-right[
![](01-r-basics_files/figure-html/unnamed-chunk-4-1.png)&lt;!-- --&gt;
]

---

## Plotly

.pull-left[
<div class="plotly html-widget html-fill-item" id="htmlwidget-1aae4c55cb836c15dbd2" style="width:504px;height:504px;"></div>
<script type="application/json" data-for="htmlwidget-1aae4c55cb836c15dbd2">{"x":{"visdat":{"50846f974da0":["function () ","plotlyVisDat"]},"cur_data":"50846f974da0","attrs":{"50846f974da0":{"x":{},"y":{},"mode":"markers","marker":{"color":"forestgreen","size":10},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Consumo vs Peso (plotly)","xaxis":{"domain":[0,1],"automargin":true,"title":"Peso del auto (wt)"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Millas por galÃ³n (mpg)"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[2.6200000000000001,2.875,2.3199999999999998,3.2149999999999999,3.4399999999999999,3.46,3.5699999999999998,3.1899999999999999,3.1499999999999999,3.4399999999999999,3.4399999999999999,4.0700000000000003,3.73,3.7799999999999998,5.25,5.4240000000000004,5.3449999999999998,2.2000000000000002,1.615,1.835,2.4649999999999999,3.52,3.4350000000000001,3.8399999999999999,3.8450000000000002,1.9350000000000001,2.1400000000000001,1.5129999999999999,3.1699999999999999,2.77,3.5699999999999998,2.7799999999999998],"y":[21,21,22.800000000000001,21.399999999999999,18.699999999999999,18.100000000000001,14.300000000000001,24.399999999999999,22.800000000000001,19.199999999999999,17.800000000000001,16.399999999999999,17.300000000000001,15.199999999999999,10.4,10.4,14.699999999999999,32.399999999999999,30.399999999999999,33.899999999999999,21.5,15.5,15.199999999999999,13.300000000000001,19.199999999999999,27.300000000000001,26,30.399999999999999,15.800000000000001,19.699999999999999,15,21.399999999999999],"mode":"markers","marker":{"color":"forestgreen","size":10,"line":{"color":"rgba(31,119,180,1)"}},"type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
]

.pull-right[

```r
# Cargar plotly
library(plotly)

# Crear grÃ¡fico interactivo
plot_ly(data = mtcars, x = ~wt, y = ~mpg, type = 'scatter', mode = 'markers',
        marker = list(color = 'forestgreen', size = 10)) %&gt;%
  layout(title = "Consumo vs Peso (plotly)",
         xaxis = list(title = "Peso del auto (wt)"),
         yaxis = list(title = "Millas por galÃ³n (mpg)"))
```
]


---
# ğŸ“Œ Principales caracterÃ­sticas de R

**6. CÃ³digo abierto y gratuito**ğŸ‘©â€ğŸ’»

--

- R es software libre bajo licencia GNU.

--

- No es necesario pagar licencias ni estar atado a ninguna empresa.

--

- Esto permite revisar, modificar y compartir el cÃ³digo fuente si asi se desea.

---
# ğŸ“Œ Principales caracterÃ­sticas de R

**7. Fuerte comunidad de usuarios**ğŸ‘¥ğŸ‘¥ğŸ‘¤

--

- Hay una **comunidad activa de usuarios** que crean paquetes, tutoriales, libros, cursos gratuitos y responden dudas en foros.

--

- Esto **facilita el aprendizaje** y la resoluciÃ³n de problemas.

--

- Los principales recursos de consulta son:

1. **[Stackoverflow](https://stackoverflow.com/questions):** foro sobre cÃ³digo en general
2. **[Posit Community](https://forum.posit.co/):** dudas mÃ¡s especificas de R
3. **[CRAN](https://cran.r-project.org/):** archivo de R, consulta sobre paquetes y documentaciÃ³n


.pull-left[![:scale 50%](input/images/stackoverflow-logo.svg)]
.pull-right[![:scale 50%](input/images/posit-community-logo.png)]

---
# ğŸ“Œ Principales caracterÃ­sticas de R

**8. Ideal para ciencia reproducible**ğŸ”„

--

- Como todo se hace escribiendo cÃ³digo, es posible guardar exactamente todos los pasos de nuestro anÃ¡lisis.

--

- Facilita prÃ¡cticas de transparencia, replicaciÃ³n y publicaciÃ³n reproducible.

---
# RStudio

--

- Es una **interfaz grÃ¡fica (IDE)** para trabajar con R de forma mÃ¡s amigable.

--

- No reemplaza a R: **lo usa por debajo**.

--

- Mejora la experiencia al programar en R gracias a:

  * Coloreado de sintaxis
  * Panel de scripts, consola, entorno y archivos
  * IntegraciÃ³n con proyectos, paquetes y versiones de control
  
--

ğŸ’¡ **Piensen en R como el motor, y RStudio como el tablero de control.**

---
# RStudio

![](input/images/rstudio.png)
---
# R vs. RStudio

| CaracterÃ­stica     | R                        | RStudio                            |
|--------------------|--------------------------|------------------------------------|
| Â¿QuÃ© es?           | Lenguaje de programaciÃ³n | Interfaz para usar R               |
| Â¿CÃ³mo se usa?      | Consola o scripts        | IDE con mÃºltiples herramientas     |
| Â¿Requiere el otro? | No                       | âœ… SÃ­, necesita tener R instalado   |
| Â¿Para quÃ© sirve?   | Hacer cÃ¡lculos, anÃ¡lisis | Facilitar el trabajo con R         |

---

class: middle, center, inverse

# _3. Fundamentales de R_

---
# RScript

--

- Archivo tipo `.R` que alberga el cÃ³digo necesario para la realizaciÃ³n de una tarea o una serie de tareas (ej. procesamiento, anÃ¡lisis o visualizaciÃ³n de datos, entre otros)

--

- Permiten guardar y compartir nuestro trabajo ğŸ’¾

--

- SerÃ¡n nuestra principal herramienta de trabajo ğŸ§

--

## âœ¨**Siempre escribir nuestro cÃ³digo en el script, nunca en la terminal/consola**âœ¨

---
# RScript
## Los Scripts como recetas de cocina ğŸ‘¨â€ğŸ³

--

- Son un **registro** de pasos necesarios para llegar a un plato especifico

--

- Los pasos deben ser realizados en **orden**: _no podemos cocer verduras si no hemos hervido el agua_

--

- Plantean el uso de **herramientas** para lograr un plato: _para hervir agua necesitamos una olla o un hervidor_

--

- Las herramientas tienen **funciones definidas**: _no podemos hervir agua con un tenedor o un microondas (o no serÃ­a lo mÃ¡s eficiente)_

---
# RScript
## Mayor reproducibilidad y transparencia ğŸ”„

--

- AsÃ­ como nosotros usamos nuestra receta de cocina para llegar al plato final, **otros pueden hacer lo mismo**. De la misma manera, nosotros podemos usar otras recetas para hacer otros platos (u otra versiÃ³n del de nosotros) ğŸ“ğŸ‘©â€ğŸ³

--

- Y mÃ¡s importante aun, nuestro trabajo estÃ¡ a disposiciÃ³n del ojo crÃ­tico de los demÃ¡s (y viceversa)... **Â¡dos (o muchas) cabezas piensan mejor que una!**ğŸ‘¥

---
# Working Directory ğŸ“ğŸ”¨

--

- La primera vez que abrimos R, este se "posiciona" en una carpeta del computador. Esta serÃ¡ nuestra carpeta de trabajo o... **_Working Directory_**

--

- El _Working Directory_ se puede revisar con el comando `getwd()`

--

- AsÃ­ tambiÃ©n, se puede cambiar con `setwd("ruta-a-carpeta-de-trabajo")`

--

- La carpeta de trabajo debe ser fijada al principio del script

--

- La idea es que el _Working Dirctory_ incluya todos los insumos necesarios para la realizaciÃ³n de la tarea o las tareas que se realizarÃ¡n en el script (ej. set de datos)

---
# Rproject
.left-column[
![:scale 50%](input/images/rproj.png)
]

--

- Es una forma que tiene R para **organizar** la carpeta de trabajo

--

- Funciona a travÃ©s de un archivo `.Rproj`, el cual define la **carpeta raÃ­z** ğŸŒ±

--

- La carpeta raÃ­z se entiende como la carpeta general que **alberga el proyecto** (y todos sus insumos y resultados). 

--

- **Facilita la reproducibilidad**. Podemos compartir nuestro trabajo sin necesidad de modificar el cÃ³digo (cambiar  el directorio de trabajo `setwd()`)

--

ğŸ‘‰**En tÃ©rminos concretos, la carpeta en dÃ³nde estÃ© el `.Rproj` serÃ¡ automÃ¡ticamente el _Working Directory_**

---
# Rproject
## Uso de rutas relativas

--

- Al explicitar una carpeta raÃ­z, no es necesario especificar la ruta completa al archivo. 

--

- Por ejemplo, si queremos cargar un set de datos `datos.rds` que estÃ¡ en la misma carpeta que el `.Rproj` podemos:

--

```r
readRDS("datos.rds")
```

--

En vez de...

--

```r
readRDS("C:/Users/mvenegasm/Desktop/ayudantia/datos.rds")
```

ğŸ“**Nota:** En este ejemplo, la carpeta `ayudantia` serÃ­a: (1) donde se encuentra el `.Rproj` (2) la carpeta raÃ­z y (3) el _Working Directory_.

---
# Paquetes (_packages_) ğŸ“¦

--

- **Conjunto de funciones** para un tipo de tarea ğŸ§

--

- Una de las principales potencialidades de R es su capacidad de **extensibilidad**

--

- La extensibilidad implica que se pueden ampliar las funciones propias de R en base a las necesidades especÃ­ficas de los usuarios

--

- Los usuarios pueden crear sus propios paquetes en la medida que lo consideren necesario.

--

- Existen una serie de paquetes que presentan **alternativas mÃ¡s idÃ³neas** para tareas cotidianas, en comparaciÃ³n a las funcionalidades de R base.

--

- Los paquetes suelen tener una comunidad detrÃ¡s que estÃ¡ preocupada de darles soporte, resolver _bugs_ y responder dudas

---

# Paquetes (_packages_) ğŸ“¦

## Los paquetes como utensilios de cocina ğŸ”ª

--

- Los paquetes se pueden pensar como los utensilios que se utilizan para ejecutar las recetas

--

- Los utensilios deben ser acordes a lo que solicita la receta

---
# Paquetes (_packages_) ğŸ“¦

## InstalaciÃ³n de paquetes ğŸ“¦ğŸ”¨

--

- La instalaciÃ³n de paquetes se debe hacer solamente una vez

--

- Una vez instalado el paquete, este estarÃ¡ albergado en nuestro computador

--

- Es necesario actualizar los paquetes de R cada cierto tiempo. Si se actualiza la versiÃ³n de R, se deben volver a instalar los paquetes.

--

- La instalaciÃ³n se hace con...

--

```r
install.packages("nombre-paquete")
```
---
# Paquetes (_packages_) ğŸ“¦

## Carga de paquetes ğŸ“¦â¬‡

--

- Instalar un paquete no significa que estÃ© listo para ser usado, para ello se deben "cargar"

--

- Siguiendo la analogÃ­a de la cocina, serÃ­a como sacar los utensilios de la alacena para dejarlos en la mesa de cocina ğŸ‘‰ğŸ”ªğŸ‘¨â€ğŸ³

--

- Los paquetes se cargan con...

```r
library(nombre-paquete)
```

---
# Paquetes (_packages_) ğŸ“¦
## `pacman` (_package manager_)

--

- Un paquete para manejar paquetes

--

- Una recomendaciÃ³n para hacer el cÃ³digo mÃ¡s eficiente

--

- `p_load()` instala y carga los paquetes segÃºn sea necesario
---
# Paquetes (_packages_) ğŸ“¦
## `pacman` (_package manager_)

--

En vez de...

--

```r
install.packages("dplyr")
install.packages("ggplot2")
install.packages("haven")
library("dplyr")
library("ggplot2")
library("haven")
```

--

Usar...

--

```r
install.packages("pacman")
pacman::p_load(dplyr, ggplot2, haven)
```

---
# Carga de datos ğŸ’»â¬‡

--

- R permite la **carga y salida de mÃºltiples tipos de archivos** (.xlsx, .csv, .dta, etc.)

--

- Esto hace mÃ¡s **flexible** el uso de insumos de distintos programas

--

- A modo de buena prÃ¡ctica, es recomendable que toda la carga de datos o insumos se realice al **inicio del script**

--

- En general, es recomendable trabajar con archivos `.RDS`. Suelen ser mÃ¡s livianos que otras opciones (p.ej el `.dta` de Stata)

---
# Carga de datos ğŸ’»â¬‡

| Tipo de archivo | ExtensiÃ³n  | Paquete       | FunciÃ³n para cargar                         |
|-----------------|------------|---------------|---------------------------------------------|
| Excel           | `.xlsx`    | `readxl`      | `read_excel("archivo.xlsx")`               |
| CSV             | `.csv`     | `readr`       | `read_csv("archivo.csv")`                  |
| Stata           | `.dta`     | `haven`       | `read_dta("archivo.dta")`                  |
| SPSS            | `.sav`     | `haven`       | `read_sav("archivo.sav")`                  |
| RDS             | `.rds`     | base de R     | `readRDS("archivo.rds")`                   |
| RData           | `.RData`   | base de R     | `load("archivo.RData")`                    |
| Feather         | `.feather` | `arrow`       | `read_feather("archivo.feather")`          |

ğŸ¤“**Nota:** RDS son el formato para archivos Ãºnicos. RData son el formato para un ambiente de trabajo en R. Feather son archivos livianos, mÃ¡s eficientes y multiplataforma, especialmente Ãºtiles cuando se trabaja con R y Python.

---
# Carga de datos ğŸ’»â¬‡
## Ejemplos

```r
# Excel
pacman::p_load(readxl) # Instalar y/o cargar paquete leer .xlsx
datos &lt;- read_excel("encuesta.xlsx") # Cargar datos
```

```r
# Stata
pacman::p_load(haven) # Instalar y/o cargar paquete leer .dta
datos &lt;- read_dta("encuesta.dta") # Cargar datos
```

```r
# R
datos &lt;- readRDS("encuesta.rds") # Cargar datos
```
---
# Tipos de datos ğŸ”¢ğŸ”¡

--

- El tipo de datos se entiende como la clasificaciÃ³n que un valor puede tener en R y que tipo de operaciones se pueden hacer con cada uno

--

- Existen al menos 6 tipos de tipos de datos: `numeric`, `integer`, `logical`, `character`, `factor` y `complex`

--

- Casi cada tipo de dato en R tiene su relaciÃ³n con el nivel de mediciÃ³n de las variables
---
# Tipos de datos ğŸ”¢ğŸ”¡
## `numeric`

- Valores dentro de los nÃºmeros reales. **Incluyen decimales**

```r
horas &lt;- c(1, 0.5, 2, 1.75, 0.25, 4)
class(horas)
```

- Se relacionan directamente con las variables continuas, ya que se componen de nÃºmeros decimales y enteros.

ğŸ‘€**OJO**: Si bien este tipo de dato estÃ¡ pensado para variables continuas, en la prÃ¡ctica suele usarse tambiÃ©n para variables empÃ­ricamente discretas (ej. edad).

---
# Tipos de datos ğŸ”¢ğŸ”¡
## `integer`

- Valores dentro de los nÃºmeros enteros

- Se declaran posponiendo una `L` al final de cada nÃºmero o la secuencia

```r
folio &lt;- c(1:10L)
class(folio)
```

- Se relacionan con variables discretas, en tanto no admiten nÃºmeros decimales

---
# Tipos de datos ğŸ”¢ğŸ”¡
## `logical`

- Valores booleanos/lÃ³gicos de verdadero o falso

```r
prueba &lt;- c(TRUE, FALSE, FALSE, TRUE, TRUE)
class(prueba)
```

- No estÃ¡n directamente relacionados a un tipo de nivel de mediciÃ³n, pero si suelen ser los resultados de pruebas o recodificaciones a partir de operadores relacionales

---
# Tipos de datos ğŸ”¢ğŸ”¡
## `character`

- Valores de texto

```r
sexo &lt;- c("Hombre", "Mujer", "Mujer", "Hombre", "Mujer")
class(sexo)
```

- Se relacionan directamente con el nivel de mediciÃ³n nominal y ordinal

---
# Tipos de datos ğŸ”¢ğŸ”¡s
## `factor`

- Valores de texto asociados a un nÃºmero limitado de categorÃ­as (`levels`)

- Son Ãºtiles cuando se quiere establecer un orden distinto al alfabÃ©tico

- Tienen ciertas ventajas en el trabajo con R (p.ej. predictores categÃ³ricos en modelos)

```r
sexo_factor &lt;- factor(c("Hombre", "Mujer", "Mujer", "Hombre", "Mujer"))
class(sexo_factor)
```

- TambiÃ©n se relacionan directamente con el nivel de mediciÃ³n nominal y ordinal

---
# Tipos de datos ğŸ”¢ğŸ”¡
## `complex`

- Valores complejos que incluyen nÃºmeros reales e imaginarios

```r
numero_complejo &lt;- c(2+3i, 2i, 1-1i)
class(numero_complejo)
```

- No estÃ¡n directamente relacionados a un nivel de mediciÃ³n

---
# Tipos de datos ğŸ”¢ğŸ”¡
## Aplicando transformaciones

Si bien cada tipo de dato tiene su propia clase, es posible transformarlos:

```r
as.numeric() # Pasar a nÃºmerico
as.integer() # Pasar a entero
as.logical() # Pasar a lÃ³gico
as.character() # Pasar a texto
as.factor() # Pasar a factor
as.complex() # Pasar a nÃºmero complejo
```
---
# Tipos de datos ğŸ”¢ğŸ”¡
## SÃ­ntesis

| Tipo     | Ejemplo                | DescripciÃ³n |
|----------|------------------------|-------------|
| numeric | `2`, `3.14`            | NÃºmeros reales, con decimales |
| integer   | `4L`                   | NÃºmeros enteros (terminan en `L`) |
| logical   | `TRUE`, `FALSE`        | Valores booleanos (sÃ­ o no, verdadero o falso) |
| character    | `"hola"`              | Cadenas de caracteres |
| factor   | `factor(c("H", "M"))` | Variables categÃ³ricas, usadas comÃºnmente para factores o niveles |
| complex   | `2+3i`, `1-1i`           | NÃºmeros complejos con partes reales e imaginarias |

---
# Estructuras de datos ğŸ§±

.left-column[
![](input/images/data_structures.png)
]

.right-column[
- Una estructura de datos es una **forma organizada de almacenar y manipular colecciones de valores**. 

- Cada estructura tiene reglas sobre cÃ³mo se almacenan los datos y **quÃ© tipos de operaciones se pueden aplicar sobre ellos**. 

- Estas estructuras son **fundamentales para el anÃ¡lisis estadÃ­stico**, ya que determinan cÃ³mo accedemos, transformamos y analizamos la informaciÃ³n.
]

---

# Estructuras de datos ğŸ§±

| Estructura   | DescripciÃ³n                                                                 | Ejemplo                                  |
|--------------|------------------------------------------------------------------------------|------------------------------------------|
| **vector**   | Secuencia de elementos del mismo tipo                                       | `c(1, 2, 3)`                              |
| **data.frame** | Tabla bidimensional con columnas de distintos tipos                        | `data.frame(nombre = c("Ana", "Luis"), edad = c(25, 30))` |
| **list**     | ColecciÃ³n de objetos de tipos distintos                                      | `list(nombre = "Ana", edad = 30, notas = c(6, 7, 5))` |
| **matrix**   | Arreglo bidimensional con elementos del mismo tipo                          | `matrix(1:6, nrow = 2)`                   |
| **array**    | Arreglo multidimensional (mÃ¡s de 2 dimensiones), todos del mismo tipo        | `array(1:12, dim = c(2, 2, 3))`           |

---
# Estructuras de datos ğŸ§±

![](https://i0.wp.com/balachandark.com/wp-content/uploads/2022/08/dataStructuresNew.png)

---
# Operadores ğŸ”£

--

- SÃ­mbolos que no son de uso exclusivo en R, sino que vienen de la matemÃ¡tica o la lÃ³gica (ej. la suma)

--

- Ahora bien, no todos tienen el mismo significado que en otros softwares.

--

- TendrÃ¡n distintos objetivos: relacionar, condicionar, excluir, repetir etc. Lo importante: **buscan darle un sentido a la "orden" que le estamos dando a R.**

--

- Los utilizaremos cuando filtremos nuestros datos para personas de ciertas categorÃ­as, cuando calculemos variables nuevas (de manera aritmÃ©tica o condicional) o, simplemente, cuando queramos hacer procesos "concatenados".

---
# Operadores ğŸ”£
## Â¿Y de quÃ© me sirven en la prÃ¡ctica?

--

- Pensemos en la siguiente situaciÃ³n, tenemos las edades de cinco personas: Juan ğŸ‘¨â€ğŸ¦±, MatÃ­as ğŸ§”, Ana ğŸ‘©â€ğŸ¦°, Leonor ğŸ§“ y SebastiÃ¡n ğŸ§‘

--


```r
# Creemos un objeto por persona
juan &lt;- 24
matias &lt;- 35
ana &lt;- 45
leonor &lt;- 65
sebastian &lt;- 12
```

--

- Los operadores nos podrÃ­an servir para responder algunas preguntas respecto a las edades de estas personas ğŸ˜¯. Vamos viendo...

---
## Operadores aritmÃ©ticos â•â–

Realizan operaciones matemÃ¡ticas bÃ¡sicas:

```r
3 + 2   # Suma
3 - 2   # Resta
3 * 2   # MultiplicaciÃ³n
3 / 2   # DivisiÃ³n
3 ^ 2   # Potencia
```
---
## Operadores aritmÃ©ticos â•â–

--

Â¿CuÃ¡l es la diferencia de edad entre Leonor ğŸ§“ y MatÃ­as ğŸ§”?


```r
leonor - matias
```

```
## [1] 30
```
--

Â¿CuÃ¡nto es el doble de la edad de Juan ğŸ‘¨â€ğŸ¦±?


```r
juan*2
```

```
## [1] 48
```
--

Â¿CuÃ¡l es la suma de todas las edades ğŸ‘¨â€ğŸ¦±ğŸ§”ğŸ‘©â€ğŸ¦°ğŸ§“ğŸ§‘?


```r
juan + matias + ana + leonor + sebastian
```

```
## [1] 181
```
---
## Operadores relacionales ğŸ’¡
Comparan valores y devuelven `TRUE` o `FALSE`:

```r
3 == 3   # Igualdad (TRUE)
3 != 2   # Diferente (TRUE)
3 &gt; 2    # Mayor que (TRUE)
3 &lt;= 2   # Menor o igual (FALSE)
```
---
## Operadores relacionales ğŸ’¡

--

Â¿Es la edad de MatÃ­as ğŸ§” igual a la de SebastiÃ¡n ğŸ§‘?


```r
matias == sebastian
```

```
## [1] FALSE
```

--

Â¿La edad de Ana ğŸ‘©â€ğŸ¦° es distinta de 45?


```r
ana != 45
```

```
## [1] FALSE
```
--

Â¿La edad de JuanğŸ‘¨â€ğŸ¦± es menor a la de MatÃ­as ğŸ§”?


```r
juan &lt; matias
```

```
## [1] TRUE
```
---
## Operadores lÃ³gicos âœ”âœ–

Usan operadores booleanos:

```r
TRUE &amp; FALSE   # Y lÃ³gico (FALSE)
TRUE | FALSE   # O lÃ³gico (TRUE)
!TRUE          # NegaciÃ³n (FALSE)
```
---
## Operadores lÃ³gicos âœ”âœ–

--

Â¿La edad de Ana ğŸ‘©â€ğŸ¦° y la edad de Juan ğŸ‘¨â€ğŸ¦± es mayor a 30?


```r
ana &gt; 30 &amp; juan &gt; 30 # No, porque no se cumplen ambas condiciones
```

```
## [1] FALSE
```
--

Â¿La edad de Ana ğŸ‘©â€ğŸ¦° o la edad de Juan ğŸ‘¨â€ğŸ¦± es mayor a 30?


```r
ana &gt; 30 | juan &gt; 30 # SÃ­, se cumple al menos una condiciÃ³n
```

```
## [1] TRUE
```
--

Â¿La edad de Leonor ğŸ§“ no es 65?


```r
!(leonor == 65) # No, porque si tiene 65 aÃ±os 
```

```
## [1] FALSE
```

---
## Operador de pertenencia â­

Verifican si un elemento pertenece a un conjunto:

```r
2 %in% c(1, 2, 3)  # TRUE
```

---
## Operador de pertenencia â­

--

Â¿Alguna de las personas tiene 33 aÃ±os?


```r
33 %in% c(juan, matias, ana, leonor, sebastian)
```

```
## [1] FALSE
```
--

Â¿Alguna de las personas tiene 12 aÃ±os?


```r
12 %in% c(juan, matias, ana, leonor, sebastian)
```

```
## [1] TRUE
```
---
# Operadores ğŸ”£
## En la realidad...

--

- En la vida real probablemente estaremos trabajando con set de datos, donde las filas corresponden a unidades de informaciÃ³n (ej. individuos) y las columnas corresponden a caracterÃ­sticas de esas unidades (ej. variables)

--

- Recordando las estructuras de datos, estaremos trabajando con un `data.frame`

--

- La pregunta es **Â¿cÃ³mo aplicamos estos operadores a un set de datos?** ğŸ¤” Veamos...

---
# Operadores ğŸ”£
## En la realidad...

--

Creemos un set de datos:


```r
datos &lt;- data.frame(
  persona = c("Juan", "Matias", "Ana", "Leonor", "Sebastian"),
  edad = c(24, 35, 45, 65, 12)
)
```

--

Accedemos a la informaciÃ³n de las columnas con `$`


```r
datos$persona
```

```
## [1] "Juan"      "Matias"    "Ana"       "Leonor"    "Sebastian"
```
---
# Operadores ğŸ”£
## En la realidad...

--

Podemos obtener la informaciÃ³n de una columna y una fila en particular, al hacer un _subset_ en base a un **filtro**.


```r
datos$edad[datos$persona == "Juan"]
```

```
## [1] 24
```
--

Aqui le estamos diciendo a R algo como: 

--

&gt; _De la columna `edad` del objeto `datos`, entregame los valores de las filas que sean idÃ©nticas al texto "Juan"_

--

ğŸ‘€**OJO:** Para hacer el filtro, estamos usando el operador relacional `==`

---

# Operadores ğŸ”£
## En la realidad...

--

Con esta informaciÃ³n, ya podrÃ­amos hacer las mismas pruebas que antes, por ejemplo...

--

Â¿CuÃ¡l es la diferencia de edad entre Leonor ğŸ§“ y MatÃ­as ğŸ§”?


```r
datos$edad[datos$persona == "Leonor"] - datos$edad[datos$persona == "Matias"] 
```

```
## [1] 30
```

--

Â¿La edad de JuanğŸ‘¨â€ğŸ¦± es menor a la de MatÃ­as ğŸ§”?


```r
datos$edad[datos$persona == "Juan"] &lt; datos$edad[datos$persona == "Matias"] 
```

```
## [1] TRUE
```

---
# Operadores ğŸ”£
## En la realidad...

--

Â¿Y si queremos crear una nueva variable que indique quienes tienen mÃ¡s de 60 aÃ±os?ğŸ¤”

--


```r
datos$mayor60 &lt;- datos$edad &gt; 60 # Crear columna
datos$mayor60 # Ver resultados
```

```
## [1] FALSE FALSE FALSE  TRUE FALSE
```

ğŸ’¡**Tip**: Puedes ver el set de datos con `View(datos)`

---
# Operadores ğŸ”£
## En la realidad...

--

Otras funciones Ãºtiles...

--

Â¿QuiÃ©n es la persona de mÃ¡s edad? ğŸ§“


```r
datos$persona[which.max(datos$edad)]
```

```
## [1] "Leonor"
```

--

Â¿QuiÃ©n es la persona de menos edad? ğŸ§‘


```r
datos$persona[which.min(datos$edad)]
```

```
## [1] "Sebastian"
```
---

class: middle, center, inverse

# _Ejercicios_

---
# Ejercicios

--

1. Abrir RStudio. Obtener el _Working Directory_ con `getwd()`. Luego cambiar el _Working Directory_ con `setwd()`.

--

2. Abrir RStudio. Crear un nuevo `.Rproj` con el nombre `ayudantia1`.

--

2. Instalar y cargar el paquete `readxl` a travÃ©s del paquete `pacman`

--

3. Cargar set de datos `encuesta.xlsx` como `encuesta`

--

4. Investigar tipos de datos de las columnas con `class()`

--

**Ahora... apliquemos los operadores a las columnas ğŸ˜**



---

# 5. Aplicando operadores
## Preguntas con operadores simples

(a) Â¿QuÃ© personas tienen ingresos mayores a 1000?



(b) Â¿QuiÃ©nes estudian y tienen menos de 30 aÃ±os?



(c) Â¿QuÃ© edad tiene la persona con mayor ingreso?



(d) Â¿Alguna persona tiene exactamente 500 de ingreso?


---
# 5. Aplicando operadores
## Agregamos una nueva variable

(e) Crear una nueva variable que indique si la persona es mayor de edad:



(f) Â¿QuÃ© personas **no estudian** y tienen ingresos **mayores a 1000**?



---
# 5. Aplicando operadores
## Preguntas mÃ¡s complejas ğŸ§ 

(g) Â¿QuiÃ©nes **estudian** o tienen **menos de 500 de ingreso**?



(h) Â¿QuÃ© personas tienen **entre 30 y 60 aÃ±os** y **no estudian**?



(i) Â¿La persona con menor ingreso es menor de edad?



(j) Â¿QuÃ© personas tienen ingresos distintos de 1000 y son mayores de 40 aÃ±os?



---

## Â¡A practicar!ğŸ‰

- Pueden modificar los valores y probar nuevas condiciones.

- Recuerden que puedes combinar operadores para hacer filtros mÃ¡s complejos.

- Pueden usar `View(datos)` o `print(datos)` para observar la base mientras trabajas.

---

class: middle, center, inverse

# Â¡Muchas gracias!

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://jciturras.github.io/ayudantia-sol3051/slides/00-intro-r/macros.js"></script>
<script>var slideshow = remark.create({
  "ratio": "16:9",
  "countIncrementalSlides": false,
  "slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>\n"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
